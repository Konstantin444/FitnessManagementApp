@{
    ViewData["Title"] = "Admin Dashboard";
    var popularSessions = ViewBag.PopularSessions as IEnumerable<FitnessApp.Models.TrainingSession>;
    var trainers = ViewBag.Trainers as IEnumerable<FitnessApp.Models.Trainer>;
}

<h1>Admin Dashboard</h1>

<div class="row">
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">Total Members</div>
            <div class="card-body">
                <h3>@ViewBag.TotalMembers</h3>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">Total Requests</div>
            <div class="card-body">
                <h3>@ViewBag.TotalRequests</h3>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">Total Visits</div>
            <div class="card-body">
                <h3>@ViewBag.TotalVisits</h3>
            </div>
        </div>
    </div>
</div>

<h2>Most Popular Training Sessions</h2>

@if (popularSessions != null && popularSessions.Any())
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Session Name</th>
                <th>Trainer</th>
                <th>Reservations</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var session in popularSessions)
            {
                <tr>
                    <td>@session.Name</td>
                    <td>@session.Trainer</td>
                    <td>@session.Reservations.Count</td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No popular training sessions found.</p>
}

<h2>All Trainers</h2>

@if (trainers != null && trainers.Any())
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Name</th>
                <th>Specialization</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var trainer in trainers)
            {
                <tr>
                    <td>@trainer.Name</td>
                    <td>
                        <a asp-action="EditTrainer" asp-route-id="@trainer.Id" class="btn btn-warning btn-sm">Edit</a>
                        <a asp-action="DeleteTrainer" asp-route-id="@trainer.Id" class="btn btn-danger btn-sm">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No trainers found.</p>
}

<!-- Button to create a new trainer -->
<div class="mt-3">
    <a asp-action="CreateTrainer" class="btn btn-primary">Create New Trainer</a>
</div>

<div class="mt-3">
    <a asp-action="ManageTrainingRequests" class="btn btn-warning">View Pending Requests</a>
</div>